use hypertext::{html_elements, maud, GlobalAttributes, Renderable, Rendered};

use super::components::Head;

/// The default "shell" around the page. Renders navigation, footer, and miscellany into place.
pub struct DefaultShell {
    pub head: Head,
}

impl DefaultShell {
    pub fn render_with_children(self, children: impl Renderable) -> Rendered<String> {
        let nav_items = maud! {
            li {a href="/" {"Home"}}
            li {a href="/impressum" {"Impressum"}}
        };

        maud! {
            !DOCTYPE
            html lang="en" {
                (self.head)
                body class="font-sans antialiased leading-relaxed max-w-[1200px] mx-auto" {
                    div class="flex gap-4 px-4 lg:px-6 lg:mt-20" {
                        aside class="hidden lg:block w-64 flex-none md:sticky lg:top-4 lg:max-h-screen lg:overflow-y-auto" {
                            p class="italic text-[3em]" {"youwen wu"}
                            nav class="space-y-4 text-2xl mt-4" {
                                ul class="space-y-2" {
                                    (nav_items)
                                }
                            }
                        }
                        main class="main-content flex-1 lg:mt-2" {
                            div class="lg:hidden border-b border-solid border-muted mb-4 flex justify-between items-center gap-4"  {
                                p class="italic text-[3em]" {"youwen wu"}
                                nav class="space-y-4 text-2xl" {
                                    ul class="flex gap-2" {
                                        (nav_items)
                                    }
                                }
                            }
                            (children)
                            footer class="border-t border-solid border-muted mb-4 flex justify-between items-center gap-4 text-lg text-muted py-1 mt-4" {
                                p class="smallcaps" {"Â© 2025 Youwen Wu. Proudly generated by " a class="text-rose" style="text-decoration: none !important;" href="https://github.com/youwen5/luminite" {"luminite"}"."}
                            }
                        }
                    }
                }
            }
        }
        .render()
    }
}
