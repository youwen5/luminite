use hypertext::{GlobalAttributes, Renderable, Rendered, html_elements, maud};
pub struct Prose {}

impl luminite::templating::Template for Prose {
    fn render_page_with_content(&self, content: hypertext::Raw<String>) -> Rendered<String> {
        let nav_items = maud! {
            li {a href="/" {"Home"}}
            li {a href="/impressum" {"Impressum"}}
        };

        maud! {
            !DOCTYPE
            html lang="en" {
                head {
                    meta name="viewport" content="width=device-width, initial-scale=1.0";
                    meta charset="utf-8";

                    title { "Youwen Wu's site" }
                    meta name="description" content="A quiet corner of the internet.";
                    // meta name="theme-color" content="#00ff80";

                    // meta name="og:title" content=(meta_title);
                    // meta name="og:description" content=(DESCRIPTION);
                    // meta name="og:url" content=(url);
                    // meta name="og:type" content="website";
                    // meta name="og:image" content=(&*image_path);

                    // meta name="twitter:card" content="summary_large_image";
                    // meta name="twitter:site" content="@vidhanio";
                    // meta name="twitter:creator" content="@vidhanio";
                    // meta name="twitter:title" content=(meta_title);
                    // meta name="twitter:description" content=(DESCRIPTION);
                    // meta name="twitter:image" content=(&*image_path);

                    link rel="stylesheet" href="/bundle.css";
                }
                body class="font-sans antialiased leading-relaxed max-w-[1200px] mx-auto" {
                    div class="flex gap-4 px-4 lg:px-6 lg:mt-20" {
                        aside class="hidden lg:block w-64 flex-none md:sticky lg:top-4 lg:max-h-screen lg:overflow-y-auto" {
                            p class="italic text-[3em]" {"youwen wu"}
                            nav class="space-y-4 text-2xl mt-4" {
                                ul class="space-y-2" {
                                    (nav_items)
                                }
                            }
                        }
                        main class="main-content flex-1 lg:mt-2" {
                            div class="lg:hidden border-b border-solid border-muted mb-4 flex justify-between items-center gap-4"  {
                                p class="italic text-[3em]" {"youwen wu"}
                                nav class="space-y-4 text-2xl" {
                                    ul class="flex gap-2" {
                                        (nav_items)
                                    }
                                }
                            }
                            div id="typst-injected" class="prose-xl mt-2 prose-headings:all-smallcaps" {
                                (content)
                            }
                            footer class="border-t border-solid border-muted mb-4 flex justify-between items-center gap-4 text-lg text-muted py-1 mt-4" {
                                p class="smallcaps" {"Â© 2025 Youwen Wu. Proudly generated by " a href="https://github.com/youwen5/luminite" {"luminite"}"."}
                            }
                        }
                    }
                }
            }
        }
        .render()
    }
}
