@import "tailwindcss";
@source "../../src";
@source "../../routes";
@source "../../typst";
@plugin "@tailwindcss/typography";

@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: normal;
  font-display: swap;
  font-weight: 200 900;
  src: url(https://cdn.jsdelivr.net/fontsource/fonts/source-sans-3:vf@latest/latin-wght-normal.woff2)
    format("woff2-variations");
  unicode-range:
    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212,
    U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: valkyrie_ot_b;
  font-style: normal;
  font-weight: normal;
  font-stretch: normal;
  font-display: auto;
  src: url("/fonts/valkyrie_ot_b_regular.woff2") format("woff2");
}

@font-face {
  font-family: valkyrie_ot_b;
  font-style: italic;
  font-weight: normal;
  font-stretch: normal;
  font-display: auto;
  src: url("/fonts/valkyrie_ot_b_italic.woff2") format("woff2");
}

@font-face {
  font-family: valkyrie_ot_b;
  font-style: normal;
  font-weight: bold;
  font-stretch: normal;
  font-display: auto;
  src: url("/fonts/valkyrie_ot_b_bold.woff2") format("woff2");
}

@font-face {
  font-family: valkyrie_ot_b;
  font-style: italic;
  font-weight: bold;
  font-stretch: normal;
  font-display: auto;
  src: url("/fonts/valkyrie_ot_b_bold_italic.woff2") format("woff2");
}

@font-face {
  font-family: concourse_index;
  font-style: normal;
  font-weight: normal;
  font-stretch: normal;
  font-display: auto;
  src: url("/fonts/concourse_index_regular.woff2") format("woff2");
}

:root {
  --bg-color: 254 254 254;
  --foreground-color: 87 82 121;
  --surface-color: 255 250 243;
  --overlay-color: 242 233 225;
  --muted-color: 152 147 165;
  --subtle-color: 121 117 147;
  --love-color: 180 99 122;
  --rose-color: 215 130 126;
  --pine-color: 40 105 131;
  --foam-color: 86 148 159;
  --iris-color: 144 122 169;
  --gold-color: 234 157 52;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: 25 23 36;
    --foreground-color: 224 222 244;
    --surface-color: 31 29 46;
    --overlay-color: 38 35 58;
    --muted-color: 110 106 134;
    --subtle-color: 144 140 170;
    --love-color: 235 111 146;
    --rose-color: 235 188 186;
    --pine-color: 49 116 143;
    --foam-color: 156 207 216;
    --iris-color: 196 167 231;
    --gold-color: 246 193 119;
  }
}

/* :root[class~="dark"] { */
/*   --base-color:            35  33  54; */
/*   --foreground-color:      224 222 244; */
/*   --surface-color:         42  39  63; */
/*   --overlay-color:         57  53  82; */
/*   --muted-color:           110 106 134; */
/*   --subtle-color:          144 140 170; */
/*   --love-color:            235 111 146; */
/*   --rose-color:            234 154 151; */
/*   --pine-color:            62  143 176; */
/*   --foam-color:            156 207 216; */
/*   --iris-color:            196 167 231; */
/*   --gold-color:            246 193 119; */
/* } */

/* ─── theme-aware color definitions ─────────────────────────────────── */
@theme inline {
  --color-bg: rgb(var(--bg-color));
  --color-foreground: rgb(var(--foreground-color));
  --color-surface: rgb(var(--surface-color));
  --color-overlay: rgb(var(--overlay-color));
  --color-muted: rgb(var(--muted-color));
  --color-subtle: rgb(var(--subtle-color));
  --color-love: rgb(var(--love-color));
  --color-rose: rgb(var(--rose-color));
  --color-pine: rgb(var(--pine-color));
  --color-foam: rgb(var(--foam-color));
  --color-iris: rgb(var(--iris-color));
  --color-gold: rgb(var(--gold-color));
}

@theme {
  --font-serif: "valkyrie_ot_b", serif;
  --font-sans: "Source Sans 3 Variable", sans-serif;
  --font-index: "concourse_index", sans-serif;
}

@utility smallcaps {
  font-variant: small-caps;
}

@utility all-smallcaps {
  font-variant: all-small-caps;
}

body {
  @apply font-serif text-foreground bg-bg;
}

/* .text-link { */
/*   @apply underline decoration-solid decoration-2 hover:text-love decoration-iris hover:decoration-love underline-offset-4; */
/* } */

.text-link {
  @apply text-pine dark:text-foam hover:underline hover:decoration-solid hover:decoration-2 hover:decoration-foam mr-1;
}

.text-link::after {
  @apply font-sans;
  content: '┓' / ', external';
  position: absolute;
  margin-top: 0.5em;
  line-height: 1em;
  font-size: 0.5em;
}

.main-content {
  .math {
    filter: invert(0);
    display: inline-block;
  }

  .block-math {
    @apply flex justify-center min-w-full overflow-x-auto my-0;
  }

  @media (prefers-color-scheme: dark) {
    .math {
      filter: invert(1);
    }
  }

  hr {
    display: none;
  }

  ul {
    @apply list-disc;
  }

  ol {
    @apply list-decimal;
  }

  li {
    @apply ml-4;
  }

  li::marker {
    @apply font-index;
    font-size: 1.1em;
  }

  pre {
    @apply px-0 py-1 overflow-x-auto w-0 min-w-full rounded-md;
    code {
      @apply rounded-md border-1 border-slate-200 dark:border-zinc-700;
    }
  }
}
